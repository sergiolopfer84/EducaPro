<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
	<link 
	     href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
	     rel="stylesheet">
		 <!-- Tu CSS principal -->
	<script th:src="@{https://code.jquery.com/jquery-3.6.0.min.js}"></script>

	<style>
		/* ======================================
		   1. ENCABEZADO (HEADER) Y TOP-BAR
		====================================== */
		header {
		  background: #1e3148;
		  display: flex;
		  flex-direction: column;
		  box-shadow: 0 0.25rem 0.375rem rgb(0, 0, 0);
		  border-radius: 0.625rem;
		  padding: 1rem;
		}

		/* Top bar con flexbox para alineación flexible */
		.top-bar {
		  display: flex;
		  align-items: center;
		  justify-content: space-between;
		  flex-wrap: wrap;
		  color: white;
		  font-weight: bold;
		  font-size: 1.5rem;
		  border-radius: 5px;
		  padding: 1rem;
		  box-shadow: 0 0.25rem 0.375rem rgb(0, 0, 0);
		}

		/* ======================================
		   2. LOGOS, VIDEO Y MULTIMEDIA
		====================================== */
		.logo-wrapper {
		  display: flex;
		  align-items: center;
		  justify-content: space-between;
		  flex: 1;
		  gap: 1rem;
		}

		.logo {
		  max-height: 80px;
		  transition: transform 0.3s ease;
		}

		.logo:hover {
		  transform: scale(1.1);
		}

		/* Video en el header */
		.videoHeader {
		  width: 40%;
		  max-height: 150px;
		  object-fit: cover;
		  border-radius: 8px;
		  box-shadow: 0px 0px 10px rgba(245, 176, 41, 0.8);
		}

		.tuacademia-img {
		  max-height: 60px;
		}

		/* ======================================
		   3. BOTONES DE AUTENTICACIÓN (LOGIN/LOGOUT)
		====================================== */
		.auth-buttons {
		  display: flex;
		  align-items: center;
		  justify-content: flex-end;
		  gap: 1rem;
		   right: auto;
		  flex-wrap: wrap;
		}

		/* Botones generales */
		.btn {
		  background-color: #f5b029;
		  color: white;
		  padding: 0.5rem 1rem;
		  border-radius: 5px;
		  border: none;
		  cursor: pointer;
		  transition: all 0.3s ease;
		  text-transform: uppercase;
		  font-size: 0.9rem;
		}

		.btn:hover {
		  background-color: #d99c0a;
		  transform: scale(1.1);
		}

		/* Iconos */
		.login-icon,
		.logout-icon {
		  max-width: 50px;
		  transition: transform 0.2s ease;
		}

		.login-icon:hover,
		.logout-icon:hover {
		  transform: scale(1.1);
		}

		/* ======================================
		   4. MEDIA QUERIES PARA RESPONSIVE
		====================================== */

		/* Tablet y pantallas medianas */
		@media (max-width: 1024px) {
		  .top-bar {
		    flex-direction: column;
		    text-align: center;
		    gap: 1rem;
		  }

		  .logo-wrapper {
		    flex-direction: column;
		    text-align: center;
		  }

		  .logo {
		    max-height: 60px;
		  }

		  .videoHeader {
		    width: 60%;
		    max-height: 120px;
		  }

		  .tuacademia-img {
		    max-height: 50px;
		  }

		  .auth-buttons {
		    flex-direction: row;
		    justify-content: center;
			margin-top:0%
		  }

		  .btn {
		    font-size: 0.8rem;
		    padding: 0.4rem 0.8rem;
		  }

		  .login-icon,
		  .logout-icon {
		    max-width: 40px;
		  }
		}

		/* Móviles */
		@media (max-width: 768px) {
		  .top-bar {
		    font-size: 1.2rem;
		  }

		  .logo {
		    max-height: 50px;
		  }

		  .videoHeader {
		    width: 80%;
		    max-height: 100px;
		  }

		  .tuacademia-img {
		    max-height: 40px;
		  }

		  .auth-buttons {
		    flex-direction: column;
		    align-items: center;
			margin-top:0%
		  }

		  .btn {
		    font-size: 0.75rem;
		    padding: 0.3rem 0.6rem;
		  }

		  .login-icon,
		  .logout-icon {
		    max-width: 35px;
		  }
		}

		/* Móviles muy pequeños */
		@media (max-width: 480px) {
		  .top-bar {
		    font-size: 1rem;
		    padding: 0.5rem;
		  }

		  .logo-wrapper {
		    align-items: center;
		  }

		  .logo {
		    max-height: 20px;
		  }

		  .videoHeader {
		    width: 100%;
		    max-height: 80px;
		  }

		  .tuacademia-img {
		    max-height: 35px;
		  }

		  .auth-buttons {
		    flex-direction: column;
		    text-align: center;
		   margin-top:0%;
		   max-width: 20%;
		   
		  }

		  .btn {
		    font-size: 0.7rem;
		    padding: 0.25rem 0.5rem;
		  }

		  .login-icon,
		  .logout-icon {
		    max-width: 30px;
		  }
		}

	  </style>
</head>

<body>
	<header th:fragment="header">
		<div class="top-bar">
			<!-- Contenedor de logos e imágenes -->
			<div class="logo-wrapper">
				<!-- Logo principal -->
				<a href="/" class="logo-container">
					<img th:src="@{/img/EducaPro EP.png}" alt="EducaPro Logo" class="logo">
				</a>


				<!-- Imagen adicional (opcional) -->
				<img th:src="@{/img/EducaPro Header.png}" alt="EducaPro Header" class="header-img">

				<!-- Imagen de chavalada -->
				<video autoplay loop muted playsinline class="videoHeader">
				    <source th:src="@{/img/videoHeader.mp4}"  type="video/mp4">
				    Tu navegador no soporta la reproducción de video.
				</video>

				<!-- Imagen “TuAcademia” -->
				<img th:src="@{/img/TuAcademia.png}" alt="Tu Academia" class="tuacademia-img">
			</div>

			<!-- Contenedor de botones de autenticación -->
			<div class="auth-buttons">
				<!-- Si el usuario NO está autenticado, solo mostrar login -->
				<div th:if="${usuario == null}" id="loginTrigger"
					style="background: none; border: none; cursor: pointer;"
					th:attr="data-toggle='modal', data-target='#authModal'">
					<img th:src="@{/img/LoginImage.png}" alt="Login" class="login-icon">
				</div>

				

				<!-- Si el usuario está autenticado -->
				<div th:if="${usuario != null}">
					
					<button id="Inicio" class="btn" onclick="window.location.href='/index'">
					    <i class="fas fa-home"></i>
					</button>


					<a href="/home" id="IrATests" class="btn">
						Ir a Tests
					</a>

					<a href="/perfil" id="perfilBtn" class="btn btn-profile">
						<i class="fas fa-user"></i> Perfil
					</a>

					<a href="/admin" id="adminBtn" class="btn btn-admin"
					   th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
					    Admin
					</a>


					<!-- Botón de LOGOUT -->
					<div th:if="${usuario != null}" id="logoutTrigger">
						<form th:action="@{/logout}" method="post" style="display: inline;">
							<button type="submit" style="background: none; border: none; cursor: pointer; padding: 0;">
								<img th:src="@{/img/LogoutImage.png}" alt="Logout" class="logout-icon">
							</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</header>

	<script th:src="@{/js/script.js}" defer></script>
</body>

</html>